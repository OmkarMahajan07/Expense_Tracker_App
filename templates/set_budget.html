<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Configure Monthly Budget</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: radial-gradient(circle at top left, #eef2ff, #f9fafb);
      }

      .btn {
        border-radius: 999px;
        font-weight: 500;
      }

      .btn-warning {
        background-color: #f59e0b;
        border-color: #f59e0b;
        color: #111827;
      }

      .btn-warning:hover {
        background-color: #d97706;
        border-color: #d97706;
        color: #111827;
      }

      .btn-outline-secondary {
        border-radius: 999px;
        background-color: #f3f4f6;
        color: #374151;
        border-color: #d1d5db;
      }

      .btn-outline-secondary:hover {
        background-color: #e5e7eb;
        color: #111827;
        border-color: #9ca3af;
      }
    </style>
  </head>
  <body class="p-4 bg-light">
    <main class="container">
      <h2 class="mb-3">Set a monthly limit</h2>
      <p class="text-muted">
        Budgets are defined per user, per category, and per month (YYYY-MM).
      </p>

      <form method="POST" class="mb-4 mt-3">
        <div class="mb-3">
          <label class="form-label">User</label>
          <select name="user_id" required class="form-select">
            <option value="" disabled selected hidden>Select a user</option>
            {% for u in users %}
            <option value="{{ u.id }}">{{ u.username }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Category</label>
          <select name="category_id" required class="form-select">
            <option value="" disabled selected hidden>Select a category</option>
            {% for c in categories %}
            <option value="{{ c.id }}">{{ c.name }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Budget amount</label>
          <input
            name="amount"
            type="number"
            step="0.01"
            min="0.01"
            required
            class="form-control"
            placeholder="e.g. 1500.00"
          />
        </div>

        <div class="mb-3">
          <label class="form-label">Month (YYYY-MM)</label>
          <input
            name="month"
            pattern="\d{4}-\d{2}"
            required
            class="form-control"
            placeholder="2025-12"
          />
        </div>

        <div class="mb-3">
          <label class="form-label">Alert threshold (%)</label>
          <input
            name="alert_threshold"
            type="number"
            min="0"
            max="100"
            value="10"
            class="form-control"
          />
          <div class="form-text">
            When the remaining budget falls below this percentage, the status
            switches to “NEAR LIMIT”.
          </div>
        </div>

        <button class="btn btn-warning me-2">Save budget</button>
        <a href="{{ url_for('index') }}" class="btn btn-outline-secondary"
          >Back to home</a
        >
      </form>

      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %} {% for category, msg in messages %}
      <div class="alert alert-{{ category }}">{{ msg }}</div>
      {% endfor %} {% endif %} {% endwith %}
    </main>
  </body>
</html>
